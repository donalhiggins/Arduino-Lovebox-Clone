# Arduino-Lovebox-DIY
A DIY version of the Lovebox inspired by [Lisa's](https://github.com/julisa99/Lovebox) and [Julian's](https://github.com/JulianBeaulieu/DIY-LoveBox) guides! I saw a few advertisements for the original ( https://en.lovebox.love/) and after seeing the price I was inspired to try and make my own. This was quite the journey though as I had no expirenence with electronics but I learned a lot along the way. Again, both Lisa and Julian as I wouldn't have even known where to start with the electronics without their guides. 
# Parts
1. [The box](https://www.amazon.com/dp/B07KRPW5JZ)
2. [Arduino Nano 33 IoT](https://www.amazon.com/dp/B07VW9TSKD)
3. [Photoresistor, 10kÎ© resistor](https://www.amazon.com/EL-CK-002-Electronic-Breadboard-Capacitor-Potentiometer/dp/B01ERP6WL4/ref=sr_1_4?crid=1B0BFY78L3N50&keywords=electronics+fun+kit&qid=1659539284&s=industrial&sprefix=electronics+fun+kit%2Cindustrial%2C177&sr=1-4)
4. [OLED Display](https://www.amazon.com/1-5inch-OLED-Module-Controller-Communicating/dp/B079NNZ9V1)
5. [Perfboard](https://www.amazon.com/dp/B072Z7Y19F)
6. [1mm Acrylic](https://www.amazon.com/SimbaLux-Plexiglass-Transparent-Protective-Replacement/dp/B08XKLP6N2/ref=sr_1_1_sspa?keywords=1mm+plastic+sheet&qid=1659539559&sr=8-1-spons&psc=1&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExOFUwQTAyTElVTVUwJmVuY3J5cHRlZElkPUExMDIwMTk2RUdPSVE5Q0RSMzhPJmVuY3J5cHRlZEFkSWQ9QTAwNzU1NjAyNjZWM0E2VlNDVllTJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==)
7. [Darkening Strip](https://www.amazon.com/Adhesive-Frosted-Privacy-Decorative-Triangle/dp/B07L5JQ94H/ref=sr_1_4?crid=35MQ7EDM1HQKY&keywords=darkening+strip&qid=1659539572&sprefix=darkening+strip%2Caps%2C190&sr=8-4)
# Hardware
This part was definitely the most difficult as I had no expierence and I couldn't get my OLED display to work (I didn't even know what SPI or I2C was so that was where the struggle was) but I figured it out! For some reason the OLED display I got had different packages than most of the other ones that had tutorials and this one has little to no documentation but eventually I found some code that worked! The set-up is very similar to Julian's aside from the motor that I chose to omit, so go check his and Lisa's repos out for help there as I couldn't explain it better than them. 
# Software
This is where I could succeed! I had a bit of a different set-up than Julian and Lisa here as I decided to do both pictures and text. I created an app in Swift/SwiftUI to do so and basically it connect to a MQTT server (I chose emqx) and sends the text/image over in plaintext. The text portion of this was really easy (as it already sends text) but I had to do some serious thinking to figure out the image part. Essentially what I ended up doing is in the app it resizes the image to 128x128 and then it convert each pixel to black or white (white being 1 and black being 0). It then uses run-length encoding to shorten the message and sends it over MQTT. Now that was the easy part though as having a string of text that is 16k characters long on an Arduino with 32KB of RAM is quite the struggle to fit. Basically I just took the run-length encoding string (which was much shorter) and dynamically unpacked it and wrote each pixel as black or white while it was unpacking. This works! but I really need to change it from Strings to char arrays as I seem to get memory leakage quite often after sending a few pictures.
